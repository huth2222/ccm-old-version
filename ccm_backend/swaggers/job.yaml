openapi: 3.0.0
info:
  version: 1.0.0
  title: Job API
  description: API documentation for user Job
tags:
  - name: Job
    description: All Job relate token
paths:
  /job:
    get:
      summary: List Job request
      tags:
        - Job
      parameters:
        - name: searchText
          in: query
          description: Text to search within job requests
          required: false
          schema:
            type: string
        - name: createDate
          in: query
          description: Date of creation for job requests format (YYYY-MM-DD)
          required: false
          schema:
            type: string
            format: date
        - name: company
          in: query
          description: Company associated with job requests
          required: false
          schema:
            type: string
        - name: channel
          in: query
          description: Channel related to job requests
          required: false
          schema:
            type: string
        - name: docstatus
          in: query
          description: Document status of job requests
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  data:
                    type: object
        "500":
          description: Internal server error
  /job/{jobId}:
    get:
      summary: Get Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Get Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  data:
                    type: object
        "500":
          description: Internal server error
  /job/submitFirstDraftJob:
    post:
      summary: Create First Draft Job request
      tags:
        - Job
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        "200":
          description: Create First Draft request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "500":
          description: Internal server error
  /job/submitDraftJob/{jobId}:
    put:
      summary: Submit Draft Job request with multiple files
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data: # Use multipart/form-data for file uploads
            schema:
              type: object
              properties:
                data:
                  type: object
                files: # Define a 'files' field as an array for the uploaded files
                  type: array
                  items:
                    type: string
                    format: binary # Set the format to 'binary' for file uploads
  /job/submitAgianDraftJob/{jobId}:
    put:
      summary: Use this api for save draft or go next page after reject
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data: # Use multipart/form-data for file uploads
            schema:
              type: object
              properties:
                data:
                  type: object
                files: # Define a 'files' field as an array for the uploaded files
                  type: array
                  items:
                    type: string
                    format: binary # Set the format to 'binary' for file uploads
      responses:
        "200":
          description: Create First Draft request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "500":
          description: Internal server error
  /job/submitSaveJob/{jobId}:
    put:
      summary: Submit Finish Job request with multiple files
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data: # Use multipart/form-data for file uploads
            schema:
              type: object
              properties:
                data:
                  type: object
                files: # Define a 'files' field as an array for the uploaded files
                  type: array
                  items:
                    type: string
                    format: binary # Set the format to 'binary' for file uploads
      responses:
        "200":
          description: Submit Finish request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "500":
          description: Internal server error
  /job/submitAgianSaveJob/{jobId}:
    put:
      summary: Use this api for submit job green button  after reject
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data: # Use multipart/form-data for file uploads
            schema:
              type: object
              properties:
                data:
                  type: object
                files: # Define a 'files' field as an array for the uploaded files
                  type: array
                  items:
                    type: string
                    format: binary # Set the format to 'binary' for file uploads
      responses:
        "200":
          description: Submit Finish request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "500":
          description: Internal server error
  /job/rejectJob/{jobId}:
    put:
      summary: Reject Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    comment:
                      type: string
                    rejectTopics:
                      type: array
                      items:
                        type: object
                        properties:
                          RejectTopic:
                            type: string
      responses:
        "200":
          description: Reject Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allowed to reject this job
        "500":
          description: Internal server error
  /job/approveJob/{jobId}:
    put:
      summary: Approve Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
      responses:
        "200":
          description: Approve Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allowed to approve this job
        "500":
          description: Internal server error
  /job/arSubmitUpdateJobById/{jobId}:
    put:
      summary: AR Submit Update Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    generalInfomation:
                      type: object
                      properties:
                        originalSearchTerm_1:
                          type: string
                        originalSearchTerm_2:
                          type: string
                        internationalSearchTerm_1:
                          type: string
                        internationalSearchTerm_2:
                          type: string
      responses:
        "200":
          description: AR Submit Update Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allow to approve this job
        "500":
          description: Internal server error
  /job/removeFile/{jobId}/{fileIndex}:
    put:
      summary: Remove file from Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
        - in: path
          name: fileIndex
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Remove file from Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  id:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allow to remove this file
        "500":
          description: Internal server error
  /job/cancelJob/{jobId}:
    put:
      summary: Cancel Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comment:
                  type: string
      responses:
        "200":
          description: Cancel Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allowed to cancel this job
        "500":
          description: Internal server error
  /job/submitCustomerId/{jobId}:
    put:
      summary: submit customer id
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: object
                  properties:
                    customerId:
                      type: string
      responses:
        "200":
          description: submit customer id ] success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        "404":
          description: Job not found or User not found
        "403":
          description: User not allowed to cancel this job
        "500":
          description: Internal server error
  /job/filedownload/{filename}:
    get:
      summary: Download file from Job request
      tags:
        - Job
      parameters:
        - in: path
          name: filename
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Download file from Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        "404":
          description: File not found
        "500":
          description: Internal server error
  /job/exportExcelJob/{jobId}:
    get:
      summary: Export Excel Job request
      tags:
        - Job
      parameters:
        - in: path
          name: jobId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Export Excel Job request success
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
        "404":
          description: Job not found
        "500":
          description: Internal server error
components:
  schemas:
    Job:
      type: object
      properties:
        createDate:
          type: string
          format: date-time
        lastDraftDate:
          type: string
          format: date-time
        isSave:
          type: boolean
          default: false
        isDraft:
          type: boolean
          default: false
        saveDate:
          type: string
          format: date-time
        jobNumber:
          type: string
          unique: true
        jobType:
          type: string
          required: true
        verify:
          type: object
          required: true
        generalInfomation:
          type: object
          default: null
        saleInfomation:
          type: object
          default: null
        authorizeDirector:
          type: object
          default: null
        billingAddress:
          type: object
          default: null
        requesterEmployeeId:
          type: string
        approveSequnce:
          type: array
        approvedList:
          type: array
          default: []
        pendingEmployeeId:
          type: string
          default: ""
        isPending:
          type: boolean
          default: false
        isRejected:
          type: boolean
          default: false
        isApproved:
          type: boolean
          default: false
        isCancelled:
          type: boolean
          default: false
        isComplete:
          type: boolean
          default: false
        rejectedById:
          type: string
          default: ""
        rejectedDate:
          type: string
          format: date-time
        cancelledById:
          type: string
          default: ""
        comment:
          type: string
          default: ""
        accessList:
          type: array
          default: []
        uploadItems:
          type: array
          default: []
        approvedDatetime:
          type: object
          default: {}
        rejectTopics:
          type: array
          default: []
        isSkipCoApprover:
          type: boolean
          default: false
        coApprover:
          type: string
          default: ""
        status:
          type: object
          default: {}
        orderNumber:
          type: integer
          default: 0
        approveUserDataLog:
          type: object
          default: {}
        companyName:
          type: string
          default: ""
        channelName:
          type: string
          default: ""
        draftIndex:
          type: integer
      example:
        lastDraftDate: "2023-10-12T05:04:28.769Z"
        isSave: true
        isDraft: false
        jobType: "newCustomer"
        verify:
          jobType: "newCustomer"
          officeType: "branch"
          taxId: "3101100280778"
          branchCode: "00001"
          companyCode: "1100"
          channel: "10"
          buyingGroup: "11000012"
        generalInfomation:
          generalType: "organization"
          originalGeneral:
            name:
              - "11111111111111111111111111111111111"
            countryCode: "TH"
            country: "Thailand"
            district: "บางพลี"
            subDistrict: "บางพลีใหญ่"
            postalCode: "10540"
            city: "สมุทรปราการ"
            companyType: "organization"
            region: "central"
            addressType: "differenceAddress"
            addressLine1: "12345"
            street: "sdfdsf"
            telephone: ""
            extension: ""
            telephoneSecond: ""
            extensionSecond: ""
            contactPerson: "dfdsf"
            mobilePhone: "0891121234"
            fax: ""
            lineId: ""
            email: ""
            emailSecond: ""
            comment: ""
            transportZoneCode: "TMABKKH150"
            transportZone: "เขตสายไหม, อ.ลำลูกกา"
          internationalVersionChoose: "differenceAddress"
          internationalGeneral:
            countryCode: "VN"
            country: "Vietnam"
            district: "none"
            subDistrict: "none"
            postalCode: "1548782222"
            city: "ho jimin"
            region: "central"
            addressLine1: "123157"
            street: "ds"
            transportZoneCode: "TFCNMA0148"
            transportZone: "เฉลิมพระเกียรติโคราช"
            name:
              - "11111111111111111111111111111111111"
        saleInfomation:
          saleEmployeeCode: "111"
          saleEmployeeName: "s1 s1"
          carrierCode: "141111"
          carrierName: "dsdfsfsd"
          salesOffice: "3006"
          salesDistrict: "372003"
          salesGroup: "BM3"
          customerGroup: "18"
          shippingCondition: "01"
          paymentTerm: "1MDD"
          creditLimit: "1"
          priceList: "XL"
          branchCode: "00001"
          description: "สาขาที่ 00001"
        authorizeDirector:
          firstName: "กดกหดหกด"
          lastName: "หกดกด"
          countryCode: "TH"
          country: "Thailand"
          postalCode: "10220"
          city: "กรุงเทพมหานคร"
          salesDistrict: "เขตบางเขน"
          salesSubDistrict: "ท่าแร้ง"
          houseNo: "fdfsdff"
          companyStreet: ""
          region: "1"
          transportZoneCode: "TSCNWT0042"
          transportZone: "เจาะไอร้อง นราธิวาส"
          gender: "M"
          taxId: "1234548454545"
          dateOfBirth: "1942-10-13"
        billingAddress:
          billingAddressChoose: "sameAddress"
        requesterEmployeeId: "111"
        approveSequnce:
          - "333"
          - "666"
          - "777"
          - "888"
          - "999"
          - "0002"
        approvedList: []
        pendingEmployeeId: "333"
        isPending: true
        isRejected: false
        isApproved: false
        isCancelled: false
        isComplete: false
        rejectedById: ""
        cancelledById: ""
        comment: ""
        accessList:
          - "333"
          - "666"
          - "777"
          - "888"
          - "999"
          - "0002"
          - "111"
        uploadItems: []
        remarkReject: ""
        isSkipCoApprover: false
        coApprover: ""
        orderNumber: 0
        companyName: "TOA PAINT"
        channelName: "RETAIL"
        createDate: "2023-10-12T05:04:28.772Z"
        jobNumber: "CC-20231012-8"
        saveDate: "2023-10-12T05:09:57.239Z"
        status:
          "111": "Waiting for Senior Supervisor approve"
          "333": "Pending"
          "666": "Pending"
          "777": "Pending"
          "888": "Pending"
          "999": "Pending"
          "0002": "Pending"
